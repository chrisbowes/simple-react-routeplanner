(this["webpackJsonpsimple-react-routeplanner"]=this["webpackJsonpsimple-react-routeplanner"]||[]).push([[0],{23:function(e,n,t){e.exports=t(35)},28:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(16),c=t.n(o),i=(t(28),t(2)),u=t(3),l=t(7),s=t(8),d=t(13),m=t(6),f=t(5),p=t(17);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){Object(p.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=a.a.createContext(),h={markers:[],polylines:[]};function v(e,n){switch(n.type){case"ADD_MARKER":return g({},e,{markers:[].concat(Object(f.a)(e.markers),[n.payload])});case"DELETE_MARKER":return g({},e,{markers:Object(f.a)(e.markers.filter((function(e){return e!==n.payload})))});case"REORDER_MARKERS":return g({},e,{markers:n.payload});case"UPDATE_POLYLINES":return g({},e,{polylines:n.payload});default:throw new Error}}function y(e){var n=a.a.useReducer(v,h),t=Object(m.a)(n,2),r={state:t[0],dispatch:t[1]};return a.a.createElement(E.Provider,{value:r},e.children)}function O(){var e=Object(i.a)(["\n    display: inline-block;\n    padding: 0 1rem;\n"]);return O=function(){return e},e}function j(){var e=Object(i.a)(["\n    color: #747474;\n    background-color: #383838;\n    border: none;\n    font-size: 1rem;\n    margin: 0;\n    padding: 0;\n"]);return j=function(){return e},e}function k(){var e=Object(i.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return k=function(){return e},e}function w(){var e=Object(i.a)(["\n    list-style-type: none;\n    margin: 0.2rem 0;\n    padding: 0.2rem 0;\n    box-sizing: border-box;\n"]);return w=function(){return e},e}var x=u.a.li(w()),D=u.a.div(k()),R=u.a.button(j()),S=u.a.span(O()),A=function(e){var n=a.a.useContext(E).dispatch;return a.a.createElement(x,{onDragOver:function(){return e.handleOnDragOver(e.index)}},a.a.createElement(D,{draggable:!0,onDragStart:function(n){return e.handleOnDragStart(n,e.index)},onDragEnd:e.handleOnDragEnd},a.a.createElement("span",null,a.a.createElement(R,null,a.a.createElement(s.a,{icon:"bars"})),a.a.createElement(S,null,"Waypoint ",e.index+1)),a.a.createElement(R,{onClick:function(){return n({type:"DELETE_MARKER",payload:e.data})}},a.a.createElement(s.a,{icon:"trash-alt"}))))};function P(){var e=Object(i.a)(["\n    border-radius: 0.3rem;\n    box-sizing: border-box;\n    border: 1px solid #e1e1e1;\n    padding: 1rem;\n    line-height: 1.2;\n    font-size: 0.8rem;\n    "]);return P=function(){return e},e}var T=u.a.div(P()),z=function(e){return a.a.createElement(T,null,e.children)};function C(){var e=Object(i.a)(["\n    margin: 0;\n    padding: 0;\n"]);return C=function(){return e},e}var I=u.a.ul(C()),L=function(){var e=a.a.useContext(E),n=e.state,t=e.dispatch,r=a.a.useState(),o=Object(m.a)(r,2),c=o[0],i=o[1],u=a.a.useState(),l=Object(m.a)(u,2),s=l[0],d=l[1],f=a.a.useState(),p=Object(m.a)(f,2),b=p[0],g=p[1];a.a.useEffect((function(){g(n.markers)}),[n.markers]);var h=function(e,t){i(n.markers[t]),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),e.dataTransfer.setDragImage(e.target.parentNode,20,20)},v=function(e){if(d(n.markers[e]),c!==s){var t=n.markers.filter((function(e){return e!==c}));t.splice(e,0,c),g(t)}},y=function(){t({type:"REORDER_MARKERS",payload:b})};return a.a.createElement(a.a.Fragment,null,n.markers.length?a.a.createElement(I,null,n.markers.map((function(e,n){return a.a.createElement(A,{key:n,data:e,index:n,handleOnDragStart:h,handleOnDragEnd:y,handleOnDragOver:v})}))):a.a.createElement(z,null,"Add markers to the map to build a sortable list. Delete and rearrange as desired. Then use the download option below to export your route in GPX format."))},_=t(4),M=t.n(_);function N(){var e=Object(i.a)(["\n    width: 100%;\n    height: 100vh;\n    "]);return N=function(){return e},e}var K=u.a.div(N()),G=function(){var e=a.a.useRef(null),n=a.a.useRef(null),t=a.a.useContext(E),r=t.state,o=t.dispatch;return a.a.useEffect((function(){e.current=M.a.map("map",{center:[45.51,-122.68],zoom:16,layers:[M.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})]}),e.current.on("click",(function(e){o({type:"ADD_MARKER",payload:M.a.marker(e.latlng).toGeoJSON()})}))}),[o]),a.a.useEffect((function(){n.current=M.a.layerGroup().addTo(e.current)}),[]),a.a.useEffect((function(){n.current.clearLayers();var e=[];if(M.a.CustomIcon=M.a.Icon.extend({options:{number:"",iconUrl:"",iconSize:[30,30],iconAnchor:[15,15],className:"custom-icon"},createIcon:function(){var e=document.createElement("div"),n=document.createElement("div");return n.setAttribute("class","number"),n.innerHTML=this.options.number||"",e.appendChild(n),this._setIconStyles(e,"icon"),e}}),r.markers.length){var t=[];r.markers.map((function(e,r){var a={lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]};return t.push(a),M.a.marker(a,{icon:new M.a.CustomIcon({number:r+1})}).addTo(n.current)}));var a=M.a.polyline(t,{color:"#0f86e8",weight:5}).addTo(n.current);e=[].concat(Object(f.a)(e),[a.toGeoJSON()])}o({type:"UPDATE_POLYLINES",payload:e})}),[o,r.markers]),a.a.createElement(K,{id:"map"})},J=t(20),B=t.n(J);function F(){var e=Object(i.a)(["\n    border: 0;\n    background-color: #c3e452;\n    padding: 0.8rem;\n    border-radius: 5px;\n    color: #383838;\n    font-size: 1rem;\n    font-weight: bold;\n    opacity: 1;\n    transition: opacity 0.3s;\n    a {\n        text-decoration: none;\n        color: inherit;\n    }\n    :disabled {\n        opacity: 0;\n    }\n"]);return F=function(){return e},e}var U=u.a.button(F()),W=function(){var e=a.a.useContext(E).state,n={type:"FeatureCollection",features:[].concat(Object(f.a)(e.markers),Object(f.a)(e.polylines))},t=e.markers.length?"data:text/json;charset=utf-8,".concat(B()(n)):null;return a.a.createElement(a.a.Fragment,null,t?a.a.createElement(U,null,a.a.createElement("a",{href:t,download:"route.gpx"},"Download Route")):a.a.createElement(U,{disabled:!0},"Download Route"))};function Y(){var e=Object(i.a)(["\n  margin: 0 0 3rem 0;\n  padding: 0 0 1rem 0;\n  font-size: 1.2rem;\n  border-bottom: 1px solid #fff;\n  "]);return Y=function(){return e},e}function H(){var e=Object(i.a)(["\n  width: 20rem;\n  background-color: #383838;\n  height: 100vh;\n  padding: 1rem;\n  box-sizing: border-box;\n  color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  "]);return H=function(){return e},e}function X(){var e=Object(i.a)(["\n  display: flex;\n  "]);return X=function(){return e},e}l.b.add(d.b,d.a);var $=u.a.div(X()),q=u.a.div(H()),Q=u.a.h1(Y());var V=function(){return a.a.createElement(y,null,a.a.createElement($,null,a.a.createElement(s.a,{icon:"fa-trash-alt"}),a.a.createElement(q,null,a.a.createElement("div",null,a.a.createElement(Q,null,"Route Builder"),a.a.createElement(L,null)),a.a.createElement(W,null)),a.a.createElement(G,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.8a7e82ed.chunk.js.map